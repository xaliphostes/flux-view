!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@youwol/flux-view",[],t):"object"==typeof exports?exports["@youwol/flux-view"]=t():e["@youwol/flux-view"]=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t),r.d(t,"Stream$",(function(){return H})),r.d(t,"child$",(function(){return M})),r.d(t,"attr$",(function(){return T})),r.d(t,"_$",(function(){return j})),r.d(t,"render",(function(){return w}));class s extends HTMLElement{constructor(){super()}initialize(e){this.currentElement=this;let t=e=>{let t=w(e);return this.currentElement.replaceWith(t),this.currentElement=t,t};return e.subscribe(e=>t(e))}}j(HTMLElement);class n extends(j(HTMLDivElement)){constructor(){super()}}class i extends(j(HTMLSpanElement)){constructor(){super()}}class c extends(j(HTMLHeadingElement)){constructor(){super()}}class o extends(j(HTMLHeadingElement)){constructor(){super()}}class u extends(j(HTMLHeadingElement)){constructor(){super()}}class l extends(j(HTMLHeadingElement)){constructor(){super()}}class a extends(j(HTMLHeadingElement)){constructor(){super()}}class p extends(j(HTMLHeadingElement)){constructor(){super()}}class f extends(j(HTMLElement)){constructor(){super()}}class d extends(j(HTMLElement)){constructor(){super()}}class h extends(j(HTMLInputElement)){constructor(){super()}}class m extends(j(HTMLLabelElement)){constructor(){super()}}class b extends(j(HTMLElement)){constructor(){super()}}class E extends(j(HTMLAnchorElement)){constructor(){super()}}class x extends(j(HTMLButtonElement)){constructor(){super()}}let y={div:n,header:f,section:d,span:i,h1:c,h2:o,h3:u,h4:l,h5:a,h6:p,input:h,label:m,i:b,a:E,button:x};function w(e){let t=function(e="div"){if(!y[e])throw Error(`The element ${e} is not registered in barbouille's factory`);return document.createElement(e,{is:"fv-"+e})}(e.tag);return t.vDom=e,t}customElements.define("fv-placeholder",s),Object.entries(y).forEach(([e,t])=>{customElements.define("fv-"+e,t,{extends:e})});let v=window.rxjs.operators;class H{constructor(e,{untilFirst:t,wrapper:r,map:s,sideEffects:n}={}){this.stream$=e,this.untilFirst=t,this.wrapper=r,this.map=s,this.sideEffects=n}subscribe(e,...t){let r=this.map?this.stream$.pipe(v.map((e,...r)=>this.map(e,...t))):this.stream$;if(this.untilFirst){let t=this.wrapper?this.wrapper(this.untilFirst):this.untilFirst,r=e(t);this.sideEffects&&this.sideEffects(t,r),this.wrapper?e(this.wrapper(this.untilFirst)):e(this.untilFirst)}return r.subscribe(t=>{let r=this.wrapper?this.wrapper(t):t,s=e(r);this.sideEffects&&this.sideEffects(r,s)})}}function M(e,t,{untilFirst:r,wrapper:s,sideEffects:n}={}){return new H(e.pipe(v.map(e=>t(e))),{untilFirst:r,wrapper:s,sideEffects:n})}function T(e,t,{untilFirst:r,wrapper:s}={}){return new H(e,{untilFirst:r,wrapper:s,map:(e,...r)=>t(e,...r)})}const L={class:(e,t)=>e.className=t,style:(e,t)=>{Object.entries(t).forEach(([t,r])=>e.style[t]=r)}};function j(e){return class extends e{constructor(...e){super(...e),this.subscriptions=new Array}initialize(e){this.vDom=e}connectedCallback(){let e=Object.entries(this.vDom).filter(([e,t])=>"children"!=e&&!(t instanceof H)),t=Object.entries(this.vDom).filter(([e,t])=>"children"!=e&&t instanceof H);e.forEach(([e,t])=>{this.applyAttribute(e,t)}),t.forEach(([e,t])=>{this.subscriptions.push(t.subscribe(t=>this.applyAttribute(e,t),this))}),this.vDom.children&&this.vDom.children.forEach(e=>{if(e instanceof H){let t=document.createElement("fv-placeholder");this.appendChild(t),this.subscriptions.push(t.initialize(e))}else{let t=w(e);this.appendChild(t)}})}disconnectedCallback(){this.subscriptions.forEach(e=>e.unsubscribe())}applyAttribute(e,t){L[e]?L[e](this,t):this[e]=t}}}}])}));
//# sourceMappingURL=flux-view.js.map